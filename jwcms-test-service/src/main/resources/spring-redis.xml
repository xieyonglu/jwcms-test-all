<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans default-autowire="byName">
    <bean id="jedisPoolConfig" class="redis.clients.jedis.JedisPoolConfig">
        <property name="maxTotal" value="${redis.maxTotal}" />
        <property name="maxIdle" value="${redis.maxIdle}" />
        <property name="maxWaitMillis" value="${redis.maxWaitMillis}" />
        <property name="testOnBorrow" value="true" />
        <property name="testOnReturn" value="true" />
        <property name="testWhileIdle" value="true" />
    </bean>
    
    <bean id="jedisSentinelPool" class="jwcms.test.common.cache.redis.core.SentinelMasterSlavePoolProxy">
    	<property name="clientName" value="jwcms-common-redis" />
        <property name="masterName" value="${redis.masterName}" />
        <property name="masterWriteOnly" value="${redis.master.write-only}" />
        <property name="sentinels" value="${redis.host}" />
        <property name="connectionTimeout" value="${redis.connectionTimeout}" />
        <property name="soTimeout" value="${redis.soTimeout}" />
        <property name="password" value="${redis.password}" />
        
        <property name="poolConfig" ref="jedisPoolConfig" />
    </bean>

    <bean id="redisDataSource" class="jwcms.test.common.cache.redis.core.RedisDataSourceImpl">
        <property name="jedisSentinelPool" ref="jedisSentinelPool" />
    </bean>
</beans>
